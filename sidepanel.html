<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="icons/brain.svg" />
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div id="app">
      <header class="app-header">
        <div class="header-content">
          <div class="header-actions" style="margin-left:auto;">
            <button id="themeToggle" class="theme-btn" title="Toggle theme">
              <span class="icon" aria-hidden="true">🌙</span>
              <span class="btn-label">Theme</span>
            </button>
            <button id="openOptions" class="settings-btn" title="Settings">
              <span class="icon" aria-hidden="true">⚙️</span>
              <span class="btn-label">Settings</span>
            </button>
          </div>
        </div>
      </header>

      <!-- In-panel Settings Overlay -->
      <div id="settingsPanel" class="settings-panel" aria-hidden="true">
        <div class="settings-header">
          <div class="settings-title">
            <span class="icon" aria-hidden="true">⚙️</span>
            <span>Settings</span>
          </div>
          <button id="closeSettings" class="settings-close" title="Back to chat">
            <span class="icon" aria-hidden="true">←</span>
            <span class="btn-label">Back</span>
          </button>
        </div>
        <iframe id="settingsFrame" title="Settings"></iframe>
      </div>

      <main id="messages" class="messages-container">
        <div class="welcome-message">
          <div class="welcome-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.5 2C7.01 2 5 4.01 5 6.5c0 1.54.8 2.9 2 3.68V10c0 1.1.9 2 2 2h1v1c0 1.1.9 2 2 2h1v1c0 1.1.9 2 2 2h1c1.1 0 2-.9 2-2v-1h1c1.1 0 2-.9 2-2v-1h1c1.1 0 2-.9 2-2V9.68c1.2-.78 2-2.14 2-3.68C23 4.01 20.99 2 18.5 2c-1.54 0-2.9.8-3.68 2H13.18C12.4 2.8 11.04 2 9.5 2zM9.5 4c.83 0 1.5.67 1.5 1.5S10.33 7 9.5 7 8 6.33 8 5.5 8.67 4 9.5 4zm9 0c.83 0 1.5.67 1.5 1.5S19.33 7 18.5 7 17 6.33 17 5.5 17.67 4 18.5 4z" fill="currentColor"/>
            </svg>
          </div>
          <h3>Welcome!</h3>
          <p>I'm here to help you understand and interact with web content. Ask me anything!</p>
        </div>
      </main>

      <form id="composer" class="composer">
        <div class="quick-actions">
          <label class="ctx ctx-inline" title="Page Context">
            <input type="checkbox" id="includePage" checked />
            <span class="checkmark"></span>
            <span class="label-text">page context</span>
          </label>
          <div class="qa-buttons">
          <button type="button" class="action-btn" data-template="Summarize this page.">
            <span class="icon" aria-hidden="true">🧾</span>
            <span>Summary</span>
          </button>
          <button type="button" class="action-btn" data-template="Rewrite the selected text to improve clarity.">
            <span class="icon" aria-hidden="true">✍️</span>
            <span>Rewrite</span>
          </button>
          <button type="button" class="action-btn" data-template="Explain the selected text step by step.">
            <span class="icon" aria-hidden="true">💡</span>
            <span>Explain</span>
          </button>
          <button type="button" class="action-btn" data-template="List pros and cons from this page.">
            <span class="icon" aria-hidden="true">⚖️</span>
            <span>Pros/Cons</span>
          </button>
          <button type="button" class="action-btn" data-template="Translate the selected text to English.">
            <span class="icon" aria-hidden="true">🌐</span>
            <span>Translate</span>
          </button>
          </div>
        </div>

        <div class="input-wrapper">
          <input id="prompt" type="text" placeholder="Ask about this page…" autocomplete="off" />
          <button id="send" type="submit">
            <span class="icon" aria-hidden="true">📨</span>
          </button>
        </div>
      </form>
    </div>
    <script src="sidepanel.js" defer></script>
  </body>
</html>
